import { BiasDefinition, TrackBiasPattern } from './types';

export const BIAS_DEFINITIONS: BiasDefinition[] = [
  {
    id: TrackBiasPattern.AUTO,
    title: '🤖 自動判定 (AI Analysis)',
    condition: '直近傾向からAIが推論',
    advantage: 'データに基づく客観的判断',
    description: '開催場の直近レース結果や馬場情報を検索し、AIが現在の馬場状態に最適なバイアスパターンを判定します。迷ったらこれを選択。',
    isBlindSpot: false,
  },
  {
    id: TrackBiasPattern.A,
    title: 'パターンA: 内有利 × 高速',
    condition: '開幕週 / Bコース替わり直後',
    advantage: '内枠の逃げ・先行、イン突き差し',
    description: '最も基本的なバイアス。距離ロスなく立ち回れる馬が圧倒的有利。',
    isBlindSpot: false,
  },
  {
    id: TrackBiasPattern.B,
    title: 'パターンB: 外有利 × タフ',
    condition: '開催後半 / 内荒れ',
    advantage: '外枠の差し・追い込み、持続力型',
    description: '内を通ると体力を削られる状態。外を回すロスよりも馬場の良い部分を走るメリットが勝る。',
    isBlindSpot: false,
  },
  {
    id: TrackBiasPattern.C,
    title: 'パターンC: 内有利 × タフ',
    condition: '【盲点】雨中の開幕序盤など',
    advantage: '内をロスなく回れるパワー先行型',
    description: '馬場は重いが、インの経済コースを通るメリットが大きい特殊状況。パワーのある馬が穴を開ける。',
    isBlindSpot: true,
  },
  {
    id: TrackBiasPattern.D,
    title: 'パターンD: 外有利 × 高速',
    condition: '【盲点】秋の東京後半など',
    advantage: '外から末脚を伸ばせるスピード型',
    description: '高速決着だが、インが詰まる、あるいは伸びない状況。外からのスムーズな加速が鍵。',
    isBlindSpot: true,
  },
];

export const FRAMEWORK_CONTEXT = `
# 究極の競馬予想フレームワーク: Logic Turf

あなたはプロの競馬投資家です。以下のフレームワークに基づき、感情を排して論理的に分析を行ってください。

## 1. 予想の主軸：能力比較（センターピン）
- 予想の「センターピン」は個体の能力比較です。
- 新聞の着順を鵜呑みにせず、前走の不利（どん詰まり、大外回し）を考慮して補正してください。
- オッズの歪みを見抜いてください（ルメール騎手の過剰人気 vs 不当に嫌われた実力馬）。
- 判断基準：能力7割、バイアス3割。

## 2. 環境分析：トラックバイアス
- パターンA（内・高速）、B（外・タフ）、C（内・タフ）、D（外・高速）のどれに該当するかを重視してください。
- 特にユーザーが指定したバイアス情報を最優先してください。

## 3. 構造分析：展開
- 枠順と脚質から隊列をシミュレーションしてください。
- バイアスの恩恵を受けられるポジションの馬を評価してください。

## 4. 遺伝的裏付け：血統
- 父系（武器）と母系（基盤）を分析。
- 条件替わり（芝→ダート、距離短縮）での血統的裏付けを確認してください。

## 5. 投資戦略
- 期待値管理を徹底。
- オッズ比（馬単÷馬連）が2.0以下の過剰人気は軽視、3.5以上の過小評価を狙ってください。
- 予算内で期待値を最大化する資金配分（傾斜配分）を提案してください。
- 推奨券種：3連複、馬連、馬単（オッズ歪み狙い）。トリガミ（複勝1.0倍など）は禁止。

出力はマークダウン形式で、以下のセクションに分けてください：
1. **【結論】**: 推奨買い目と資金配分（予算内に収めること）。
2. **【論理的根拠 - 能力】**: 能力スクリーニングの結果。
3. **【論理的根拠 - 環境・構造】**: バイアスと展開の適合性。
4. **【リスクとリターン】**: オッズの歪みと投資価値の解説。
`;